(function(t){function e(e){for(var n,r,s=e[0],l=e[1],c=e[2],p=0,u=[];p<s.length;p++)r=s[p],o[r]&&u.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);h&&h(e);while(u.length)u.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,s=1;s<i.length;s++){var l=i[s];0!==o[l]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},o={app:0},a=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/IFD-ICS-4-1-INT-ENG/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var h=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d");var n=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"g-container",attrs:{id:"IFD-ICS-4-1-INT"}},[i("Visualization",{attrs:{"container-width":this.calculateContainerWidth()}})],1)},a=[],r=i("5698"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vis"},[t._m(0),i("div",{staticClass:"vis-legend"},[i("svg",[i("defs",[i("linearGradient",{attrs:{id:"gradiente-escala",x1:"0%",y1:"0%",x2:"100%",y2:"0%"}},[i("stop",{staticStyle:{"stop-color":"RGB(222,77,75)","stop-opacity":"1"},attrs:{offset:"0%"}}),i("stop",{staticStyle:{"stop-color":"RGB(240,181,98)","stop-opacity":"1"},attrs:{offset:"35%"}}),i("stop",{staticStyle:{"stop-color":"RGB(82,173,146)","stop-opacity":"1"},attrs:{offset:"70%"}}),i("stop",{staticStyle:{"stop-color":"RGB(102,56,240)","stop-opacity":"1"},attrs:{offset:"100%"}})],1)],1),i("g",[i("rect",{attrs:{id:"escala",x:"10",y:"30",width:"0",height:"10",fill:"url(#gradiente-escala)"}})])])]),i("div",{staticClass:"vis-content"},[i("svg")]),t._m(1)])},l=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vis-header"},[i("h3",[t._v("The perception of corruption")]),i("p",[t._v("Uruguay, Chile and Costa Rica are the best performing countries thanks to their institutional\n            improvements and legal anti-corruption efforts, undertaken throughout the last decade. ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vis-footer"},[i("p",[i("img",{staticClass:"footer-image",attrs:{src:"images/logo_bid.svg"}}),t._v("\n            Â \n            Source: Transparency International (2017)\n        ")])])}],c=(i("c5f6"),i("3fe2")),h={name:"Visualization",props:{containerWidth:Number},data:function(){return{height:0,width:0,tooltip:void 0,tooltipOffset:void 0,centered:void 0,path:void 0}},mounted:function(){console.log("Visualization mounted"),this.loadMap()},updated:function(){console.log("Visualization updated"),this.loadMap()},methods:{loadMap:function(){console.log("Loading Map"),this.width=this.containerWidth,this.height=1.1*this.width,r["h"]("#escala").attr("width",this.width-20+"px");var t=r["d"]().scale(1).translate([this.width/2,this.height/2]);this.path=r["e"]().projection(t);var e=r["h"]("div.vis-legend > svg").attr("width",this.width).attr("height",65),i=r["g"]().domain([0,100]).range([10,this.width-10]),n=r["a"](i).tickValues([0,20,40,60,80,100]);e.append("g").attr("transform","translate(0,25)").call(n),e.append("text").attr("x",10).attr("y",60).text("Worse"),e.append("text").attr("x",this.width-10).attr("y",60).attr("text-anchor","end").text("Better");var o=r["h"]("div.vis-content >svg").attr("width",this.width).attr("height",this.height);o.append("g").attr("class","features").attr("transform","translate(0,0)");var a=r["g"]().domain([100,70,35,0]).range(["#6638F0","#52AD92","#F0B562","#DE4D4B"]);this.tooltip=r["h"]("body").append("div").attr("class","tooltip");var s=this;r["f"]("/IFD-ICS-4-1-INT-ENG/data/alc_cpi.topojson").then(function(e){var i=c["a"](e,e.objects.collection),n=s.calculateScaleCenter(i);t.scale(n.scale).center(n.center),r["h"]("g.features").selectAll("path").data(i.features).enter().append("path").attr("class","country").attr("d",s.path).attr("style",function(t){return"fill:"+("string"===typeof a(t.properties.CPI)?a(t.properties.CPI):"")}).on("mouseover",s.showTooltip).on("mousemove",s.moveTooltip).on("mouseout",s.hideTooltip).on("click",s.clicked)}),this.tooltipOffset={x:5,y:-35}},moveTooltip:function(){this.tooltip.style("top",r["b"].pageY+this.tooltipOffset.y+"px").style("left",r["b"].pageX+this.tooltipOffset.x+"px")},showTooltip:function(t){this.moveTooltip(),this.tooltip.style("display","block").text(t.properties.COUNTRY_EN+" "+t.properties.CPI)},hideTooltip:function(){this.tooltip.style("display","none")},clicked:function(t,e){var i,n,o,a=this;if(t&&this.centered!==t){var s=this.path.centroid(t),l=this.path.bounds(t);i=s[0],n=s[1],o=.8/Math.max((l[1][0]-l[0][0])/this.width,(l[1][1]-l[0][1])/this.height),this.centered=t}else i=this.width/2,n=this.height/2,o=1,this.centered=null;r["h"]("g.features").selectAll("path").classed("highlighted",function(t){return t===a.centered}).style("stroke-width",.5/o+"px"),r["h"]("g.features").transition().duration(300).attr("transform","translate("+this.width/2+","+this.height/2+")scale("+o+")translate("+-i+","+-n+")")},calculateScaleCenter:function(t){var e=this.path.bounds(t),i=1/Math.max((e[1][0]-e[0][0])/this.width,(e[1][1]-e[0][1])/this.height),n=r["c"](t),o=[(n[1][0]+n[0][0])/2,(n[1][1]+n[0][1])/2];return{scale:i,center:o}}}},p=h,u=(i("81c2"),i("2877")),d=Object(u["a"])(p,s,l,!1,null,null,null);d.options.__file="Visualization.vue";var f=d.exports,v={name:"app",components:{Visualization:f},data:function(){return{}},mounted:function(){console.log("App loaded")},methods:{calculateContainerWidth:function(){var t=r["h"]("#IFD-ICS-4-1-INT").node().getBoundingClientRect();return t.width}}},g=v,y=(i("5c0b"),Object(u["a"])(g,o,a,!1,null,null,null));y.options.__file="App.vue";var m=y.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(m)}}).$mount("#IFD-ICS-4-1-INT")},"5c0b":function(t,e,i){"use strict";var n=i("5e27"),o=i.n(n);o.a},"5e27":function(t,e,i){},"81c2":function(t,e,i){"use strict";var n=i("962a"),o=i.n(n);o.a},"962a":function(t,e,i){}});
//# sourceMappingURL=app.c7a59f5a.js.map